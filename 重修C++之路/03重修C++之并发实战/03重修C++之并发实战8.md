# 03重修C++之并发实战 8

【设计并发代码】

## 8.1 在线程间划分工作的技术



### 8.1.1 处理开始前在线程间划分数据

划分数据最简单的方法就是将第一之组N个元素分配给一个线程，将下一组N个元素分配给另一个线程，以此类推，但是也可以使用别的模式。无论如何划分数据，每个线程只能处理分配给它的元素，并且直到它完成任务的时候才能与别的线程通信。这种结构与使用消息传递接口（Message Passing Intrerface, MPI）或者OpenMP框架编程的结构是类似的。



### 8.1.2 递归地划分数据

快速排序算法有两个基本步骤，基于其中一个元素（关键值）将数据划分为两部分，一部分在关键值之前，一部分在关键值之后，然后递归地排序这两部分。我们无法通过预先划分数据来实行并行，因为只有当处理元素的时候才知道这个元素是属于那一部分的，如果打算并行这个算法就需要把握递归的本质。每次递归的时候，会调用更多的quick_sort函数来排序关键点之前和关键点之后的元素。这些递归调用是完全独立的，因为它们读取完全不同的集合。







